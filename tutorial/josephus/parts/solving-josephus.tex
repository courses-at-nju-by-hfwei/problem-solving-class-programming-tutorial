%%%%%%%%%%%%%%%
\begin{frame}{}
  \centerline{\LARGE Solving the Josephus Puzzle}
\end{frame}
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
\begin{frame}[fragile]{Josephus Programming Task Decomposed}
  % \begin{lstlisting}[escapeinside = {||}, 
  %       mathescape = true]
  %   |\textit{input the number $n$ of soliders}|

  %   |\textit{find the survivor of the Josephus puzzle with $n$ soliders}|

  %   |\textit{output the survivor}|
  % \end{lstlisting}

  \begin{lstlisting}[style = Cstyle]
    int main(void) {
      return 0;
    }
  \end{lstlisting}
  \vspace{0.20cm}

  {\it
    \begin{enumerate}
      \setlength{\itemsep}{6pt}
      \item input the number $n$ of soliders
      \item find the survivor of the Josephus puzzle with $n$ soliders
      \item output the survivor
    \end{enumerate}
  }

  \vspace{0.20cm}
  \pause
  \begin{lstlisting}[style = Cstyle]
    int main(void) {
      int n = 0;
      scanf(''%d'', &d);
      int survivor = solve_josephus(int n);
      printf(''The survivor is %d.'', survior + 1);
      return 0;
    }
  \end{lstlisting}
\end{frame}
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
\begin{frame}[fragile]{\texttt{int solve\_josephus(int n);}}
  % \begin{lstlisting}[style = Cstyle]
  %   int solve_josephus(int n);
  % \end{lstlisting}

  \begin{enumerate}
    \setlength{\itemsep}{6pt}
    \item create $n$ soliders with ids $1 \cdots n$
    \item keep killing each other until only one soldier survives
    \item return the id of the survivor
  \end{enumerate}

  \vspace{0.20cm}
  \pause
  \begin{lstlisting}[style = Cstyle]
    int solve_josephus(int n) {
      // create $n$ soldiers with ids $1 \cdots n$
      int soldiers[n];
      for (int i = 0; i < n; ++i) {
        soldiers[i] = i + 1;
      }

      return survive(soldiers, n);
    }
  \end{lstlisting}
\end{frame}
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
\begin{frame}[fragile]{\texttt{int survive(int soldiers[], int n);}}
  % \begin{lstlisting}[style = Cstyle]
  %   int survive(int soldiers[], int n);
  % \end{lstlisting}

  \begin{enumerate}
    \item kill $n-1$ soldiers 
      \begin{enumerate}
	\item identify the killer
	\item identify the killed
      \end{enumerate}
  \end{enumerate}

  \vspace{0.20cm}
  \pause
  \begin{lstlisting}[style = Cstyle]
    int survive(int soldiers[], int n) {
      int killer = 0, killed = 0;
      // kill $n-1$ soldiers
      for (int i = 0; i < n - 1; ++i) {
        killed = next_alive(soldiers, n, killer);
        soldiers[killed] = DEAD;   // #define DEAD 0
        killer = next_alive(soldiers, n, killed);
      }
      return killer;
    }
  \end{lstlisting}
\end{frame}
%%%%%%%%%%%%%%%
\begin{frame}[fragile]{\texttt{int next\_alive(int soldiers[], int n, int pos)}}
  \begin{lstlisting}[style = Cstyle]
    int next_alive(int soldiers[], int n, int pos) {
      do {
        pos = (pos + 1) % num;
      } while (soldier[pos] == KILLED);

      return pos;
    }
  \end{lstlisting}
\end{frame}
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
\begin{frame}[fragile]{\texttt{void test\_josephus(int n);}}
  \begin{lstlisting}[style = Cstyle]
    void test_josephus(int n) {
      for (int i = 1; i <= limit; ++i) {
        printf(''%d: %d\n'', i, solve_josephus(i) + 1);
      }
    }
  \end{lstlisting}

  \pause
  \[
    n = 50, 100, \cdots, 1000 
  \]

  \[
    n = 16, 64, 128, 1024
  \]

  \vspace{0.50cm}
  \pause
  \centerline{\red{$Q$}: What have you found?}
\end{frame}
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%

%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%
